# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'H:\NSCC\UI\field\SolvereditUi.ui'
#
# Created by: PyQt5 UI code generator 5.15.1
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.


from PyQt5.QtWidgets import *
from PyQt5 import QtCore, QtGui, QtWidgets


class Ui_solver_form(object):
    def __init__(self):  
        super(Ui_solver_form, self).__init__()
        self.setupUi
    def setupUi(self, Ui_solver_edit):
        Ui_solver_edit.setObjectName("Ui_solver_edit")
        Ui_solver_edit.resize(634, 244)
        self.verticalLayout = QtWidgets.QVBoxLayout(Ui_solver_edit)
        self.verticalLayout.setObjectName("verticalLayout")
        self.formLayout = QtWidgets.QFormLayout()
        self.formLayout.setLabelAlignment(QtCore.Qt.AlignLeft|QtCore.Qt.AlignLeft|QtCore.Qt.AlignVCenter)
        self.formLayout.setFormAlignment(QtCore.Qt.AlignLeading|QtCore.Qt.AlignLeft|QtCore.Qt.AlignVCenter)
        self.formLayout.setContentsMargins(50, -1, 50, -1)
        self.formLayout.setHorizontalSpacing(100)
        self.formLayout.setVerticalSpacing(20)
        self.formLayout.setObjectName("formLayout")
        self.label = QtWidgets.QLabel(Ui_solver_edit)
        self.label.setObjectName("label")
        self.formLayout.setWidget(0, QtWidgets.QFormLayout.LabelRole, self.label)
        self.comboBox = QtWidgets.QComboBox(Ui_solver_edit)
        self.comboBox.setMinimumSize(QtCore.QSize(0, 40))
        self.comboBox.setObjectName("comboBox")
        self.comboBox.addItem("")
        self.comboBox.addItem("")
        self.comboBox.addItem("")
        self.comboBox.addItem("")
        self.comboBox.addItem("")
        self.comboBox.addItem("")
        self.comboBox.addItem("")
        self.formLayout.setWidget(0, QtWidgets.QFormLayout.FieldRole, self.comboBox)
        self.label_2 = QtWidgets.QLabel(Ui_solver_edit)
        self.label_2.setObjectName("label_2")
        self.formLayout.setWidget(1, QtWidgets.QFormLayout.LabelRole, self.label_2)
        self.comboBox_2 = QtWidgets.QComboBox(Ui_solver_edit)
        self.comboBox_2.setMinimumSize(QtCore.QSize(0, 40))
        self.comboBox_2.setObjectName("comboBox_2")
        self.comboBox_2.addItem('请选择')
        self.formLayout.setWidget(1, QtWidgets.QFormLayout.FieldRole, self.comboBox_2)
        self.verticalLayout.addLayout(self.formLayout)
        self.buttonBox = QtWidgets.QDialogButtonBox(Ui_solver_edit)
        self.buttonBox.setOrientation(QtCore.Qt.Horizontal)
        self.buttonBox.setStandardButtons(QtWidgets.QDialogButtonBox.Cancel|QtWidgets.QDialogButtonBox.Ok)
        self.buttonBox.setObjectName("buttonBox")
        self.verticalLayout.addWidget(self.buttonBox)  
        self.retranslateUi(Ui_solver_edit)
        self.buttonBox.accepted.connect(Ui_solver_edit.accept)
        self.buttonBox.rejected.connect(Ui_solver_edit.reject)
        QtCore.QMetaObject.connectSlotsByName(Ui_solver_edit)
        self.comboBox.currentIndexChanged['int'].connect(self.rm_item)        
        self.comboBox.currentIndexChanged['int'].connect(self.modify_smoother)
        # self.buttonBox.accepted.connect(self.collect_solver_para)
        # self.comboBox.currentTextChanged['QString'].connect(lambda:self.adj_form_size(Ui_solver_edit))

    def retranslateUi(self, Ui_solver_edit):
        _translate = QtCore.QCoreApplication.translate
        Ui_solver_edit.setWindowTitle(_translate("Ui_solver_edit", "求解器编辑"))
        self.label.setText(_translate("Ui_solver_edit", "solver:"))
        self.comboBox.setItemText(0, _translate("Ui_solver_edit", "请选择"))
        self.comboBox.setItemText(1, _translate("Ui_solver_edit", "smoothSolver"))
        self.comboBox.setItemText(2, _translate("Ui_solver_edit", "GAMG"))
        self.comboBox.setItemText(3, _translate("Ui_solver_edit", "diagonal"))
        self.comboBox.setItemText(4, _translate("Ui_solver_edit", "PCG"))
        self.comboBox.setItemText(5, _translate("Ui_solver_edit", "PBiCG"))
        self.comboBox.setItemText(6, _translate("Ui_solver_edit", "PBiCGStab"))
        self.label_2.setText(_translate("Ui_solver_edit", "smoother:"))

    def modify_smoother(self,index):
        if index == 1:
            self.label_2.setVisible(True)
            self.label_2.setText('smoother:')
            self.comboBox_2.setVisible(True) 
            self.comboBox_2.clear()
            self.comboBox_2.addItems(['gaussSeidel','symGaussSeidel','DIC','DILU','DICGaussSeidel'])
            self.layout = self.create_begin_layout()
            self.formLayout.setLayout(3,QFormLayout.SpanningRole,self.layout)
            # print(self.layout.itemAt(1).widget().text())
            # self.label_7 = QtWidgets.QLabel('nSweeps:')
            # self.label_7.setFixedHeight(40)
            # self.lineedit_7 = QtWidgets.QLineEdit('1')
            # self.lineedit_7.setFixedHeight(40)
            self.label_8 = QtWidgets.QLabel('Final:')
            self.label_8.setFixedHeight(40)
            self.comboBox_8 = QtWidgets.QComboBox()
            self.comboBox_8.addItem('off')
            self.comboBox_8.addItem('on')
            self.comboBox_8.setFixedHeight(40)
            self.layout_1 = QHBoxLayout()
            # self.layout_1.addWidget(self.label_7)
            # self.layout_1.addWidget(self.lineedit_7)
            self.layout_1.addWidget(self.label_8)
            self.layout_1.addWidget(self.comboBox_8)
            # self.comboBox_8.setFixedWidth(180)
            self.formLayout.setLayout(4,QFormLayout.SpanningRole,self.layout_1)
            self.layout_1.setSpacing(15)
            self.comboBox_8.currentIndexChanged['int'].connect(self.create_final_layout)

        if index == 2:
            self.label_2.setVisible(True)
            self.label_2.setText('smoother:')
            self.comboBox_2.setVisible(True) 
            self.comboBox_2.clear()
            self.comboBox_2.addItems(['GaussSeidel','SymGaussSeidel','DIC','DILU','DICGaussSeidel'])
            self.layout = self.create_begin_layout()
            self.formLayout.setLayout(3,QFormLayout.SpanningRole,self.layout)  

            self.label_9 = QtWidgets.QLabel('nPostSweeps:')
            self.label_9.setFixedHeight(40)
            self.lineedit_9 = QtWidgets.QLineEdit('0')
            self.lineedit_9.setFixedHeight(40)
            self.label_10 = QtWidgets.QLabel('nPreSweeps:')
            self.label_10.setFixedHeight(40)
            self.lineedit_10 = QtWidgets.QLineEdit('2')
            self.lineedit_10.setFixedHeight(40)
            self.layout_1 = QHBoxLayout()
            self.layout_1.addWidget(self.label_9)
            self.layout_1.addWidget(self.lineedit_9)
            self.layout_1.addWidget(self.label_10)
            self.layout_1.addWidget(self.lineedit_10)
            self.layout_1.setSpacing(4)
            self.formLayout.setLayout(4,QFormLayout.SpanningRole,self.layout_1) 

            self.label_11 = QtWidgets.QLabel('cacheAgglomeration:')
            self.label_11.setFixedHeight(40)
            self.comboBox_11 = QtWidgets.QComboBox()
            self.comboBox_11.addItem('on')
            self.comboBox_11.addItem('off')
            self.comboBox_11.setFixedHeight(40)
            self.label_12 = QtWidgets.QLabel('agglomerator:')
            self.label_12.setFixedHeight(40)
            self.comboBox_12 = QtWidgets.QComboBox()
            self.comboBox_12.addItem('faceAreaPair')
            self.comboBox_12.setFixedHeight(40)
            self.layout_1 = QHBoxLayout()
            self.layout_1.addWidget(self.label_11)
            self.layout_1.addWidget(self.comboBox_11)
            self.layout_1.addWidget(self.label_12)
            self.layout_1.addWidget(self.comboBox_12)
            self.layout_1.setSpacing(10)
            self.formLayout.setLayout(5,QFormLayout.SpanningRole,self.layout_1) 

            self.label_13 = QtWidgets.QLabel('nCellsInCoarsestLevel:')
            self.label_13.setFixedHeight(40)
            self.lineedit_13 = QtWidgets.QLineEdit('0')
            self.lineedit_13.setFixedHeight(40)
            self.label_14 = QtWidgets.QLabel('mergeLevels:')
            self.label_14.setFixedHeight(40)
            self.lineedit_14 = QtWidgets.QLineEdit('2')
            self.lineedit_14.setFixedHeight(40)
            self.layout_1 = QHBoxLayout()
            self.layout_1.addWidget(self.label_13)
            self.layout_1.addWidget(self.lineedit_13)
            self.layout_1.addWidget(self.label_14)
            self.layout_1.addWidget(self.lineedit_14)
            self.layout_1.setSpacing(4)
            self.formLayout.setLayout(6,QFormLayout.SpanningRole,self.layout_1) 

            self.label_7 = QtWidgets.QLabel('directSolveCoarset:')
            self.label_7.setFixedHeight(40)
            self.comboBox_7 = QtWidgets.QComboBox()
            self.comboBox_7.addItem('False')
            self.comboBox_7.addItem('True')
            self.comboBox_7.setFixedHeight(40)
            self.label_8 = QtWidgets.QLabel('Final:')
            self.label_8.setFixedHeight(40)
            self.comboBox_8 = QtWidgets.QComboBox()
            self.comboBox_8.addItem('off')
            self.comboBox_8.addItem('on')
            self.comboBox_8.setFixedHeight(40)
            self.layout_1 = QHBoxLayout()
            self.layout_1.addWidget(self.label_7)
            self.layout_1.addWidget(self.comboBox_7)
            self.layout_1.addWidget(self.label_8)
            self.layout_1.addWidget(self.comboBox_8)
            self.layout_1.setSpacing(10)
            self.formLayout.setLayout(7,QFormLayout.SpanningRole,self.layout_1) 
            self.comboBox_8.currentIndexChanged['int'].connect(self.create_final_layout)

        if index == 3:
            self.label_2.setVisible(False)
            self.comboBox_2.setVisible(False)
            self.label_8 = QtWidgets.QLabel('Final:')
            self.label_8.setFixedHeight(40)
            self.comboBox_8 = QtWidgets.QComboBox()
            self.comboBox_8.addItem('off')
            self.comboBox_8.addItem('on')
            self.comboBox_8.setFixedHeight(40)
            self.comboBox_8.setFixedWidth(350)
            self.layout_1 = QHBoxLayout()
            self.layout_1.addWidget(self.label_8)
            self.layout_1.addWidget(self.comboBox_8)
            self.layout_1.setSpacing(10)
            self.label_2.setVisible(False)
            self.comboBox_2.setVisible(False) 
            self.formLayout.setLayout(2,QFormLayout.SpanningRole,self.layout_1) 
            self.comboBox_8.currentIndexChanged['int'].connect(self.create_final_layout)  
                                 
        if index in range(4,7):
            self.label_2.setVisible(True)
            self.comboBox_2.setVisible(True)
            self.label_2.setText('Preconditioner:')
            self.comboBox_2.clear()
            self.comboBox_2.addItems(['DIC','DILU','FDIC','GAMG','Diagonal','None'])
            self.layout = self.create_begin_layout()
            self.formLayout.setLayout(3,QFormLayout.SpanningRole,self.layout) 
            self.label_8 = QtWidgets.QLabel('Final:')
            self.label_8.setFixedHeight(40)
            self.comboBox_8 = QtWidgets.QComboBox()
            self.comboBox_8.addItem('off')
            self.comboBox_8.addItem('on')
            self.comboBox_8.setFixedHeight(40)
            self.comboBox_8.setFixedWidth(350)
            self.layout_1 = QHBoxLayout()
            self.layout_1.addWidget(self.label_8)
            self.layout_1.addWidget(self.comboBox_8)
            self.layout_1.setSpacing(10)
            # self.label_2.setVisible(False)
            # self.comboBox_2.setVisible(False) 

            self.formLayout.setLayout(4,QFormLayout.SpanningRole,self.layout_1) 
            self.comboBox_8.currentIndexChanged['int'].connect(self.create_final_layout)              

    def create_final_layout(self,index):
        if index == 1:
            self.label_5 = QtWidgets.QLabel('tolerance_Final:')
            self.label_5.setFixedHeight(40)
            self.label_6 = QtWidgets.QLabel('retol_Final:')
            self.label_6.setFixedHeight(40)
            self.lineedit_5 = QtWidgets.QLineEdit('1.0E-6')
            self.lineedit_5.setFixedHeight(40)
            self.lineedit_6 = QtWidgets.QLineEdit('0.1')
            self.lineedit_6.setFixedHeight(40)
            self.layout_final = QHBoxLayout()
            self.layout_final.addWidget(self.label_5)
            self.layout_final.addWidget(self.lineedit_5)
            self.layout_final.addWidget(self.label_6)
            self.layout_final.addWidget(self.lineedit_6)
            self.layout_final.setSpacing(15)
            row_num = self.formLayout.rowCount()+1
            self.formLayout.setLayout(row_num,QFormLayout.SpanningRole,self.layout_final)
        else:
            final_row = self.formLayout.getLayoutPosition(self.layout_final)[0]
            self.formLayout.removeRow(final_row)

    def create_begin_layout(self):
        self.layout = QHBoxLayout()
        self.label_3 = QtWidgets.QLabel('tolerance:')
        self.label_3.setFixedHeight(40)
        self.lineedit_3 = QtWidgets.QLineEdit('1.0E-6')
        self.lineedit_3.setFixedHeight(40)
        self.label_4 = QtWidgets.QLabel('retol:')
        self.label_4.setFixedHeight(40)
        self.lineedit_4 = QtWidgets.QLineEdit('0.1')
        self.lineedit_4.setFixedHeight(40)
        self.layout.addWidget(self.label_3)
        self.layout.addWidget(self.lineedit_3)
        self.layout.addWidget(self.label_4)
        self.layout.addWidget(self.lineedit_4)
        self.layout.setSpacing(15)
        return self.layout

    def rm_item(self):
        while self.formLayout.count() != 4:
            self.formLayout.removeRow(2)

    def adj_form_size(self,form):
        row =self.formLayout.rowCount()
        form.resize(form.geometry().width(),row*41+40)

    def collect_solver_para(self):
        pass




if __name__ == '__main__':  
    import sys  
    app = QApplication(sys.argv)  
    MainDialog = QDialog() 
    myWindow = Ui_solver_form()  
    myWindow.setupUi(MainDialog) 
    MainDialog.show()
    sys.exit(app.exec_()) 
